{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///X:/Apps/MelodyMakerStudio/lib/env.ts"],"sourcesContent":["import { createEnv } from \"@t3-oss/env-nextjs\";\nimport { z } from \"zod\";\n\nexport const env = createEnv({\n  /**\n   * Run `build` or `dev` with `SKIP_ENV_VALIDATION` to skip env validation. This is especially\n   * useful for Docker builds.\n   */\n  skipValidation: !!process.env.SKIP_ENV_VALIDATION,\n\n  /**\n   * Specify your server-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars.\n   */\n  server: {\n    /* -----------------------------------------------------------------------------------------------\n     * Node.js Environment\n     * -----------------------------------------------------------------------------------------------*/\n\n    NODE_ENV: z\n      .enum([\"development\", \"test\", \"production\"])\n      .default(\"development\"),\n\n    /* -----------------------------------------------------------------------------------------------\n     * Firebase Configuration (Server-side)\n     * -----------------------------------------------------------------------------------------------*/\n\n    FIREBASE_PROJECT_ID: z\n      .string()\n      .min(1, { message: \"Firebase Project ID is invalid or missing\" }),\n    FIREBASE_CLIENT_EMAIL: z\n      .string()\n      .email({ message: \"Firebase Client Email is invalid or missing\" }),\n    FIREBASE_PRIVATE_KEY: z\n      .string()\n      .min(1, { message: \"Firebase Private Key is invalid or missing\" }),\n\n    /* -----------------------------------------------------------------------------------------------\n     * JioSaavn API URL (https://github.com/mehedihasan2810/jiosaavn-api-ts)\n     * -----------------------------------------------------------------------------------------------*/\n\n    JIOSAAVN_API_URL: z\n      .string()\n      .url({ message: \"JioSaavn API URL is invalid or missing\" })\n      .optional(),\n\n    /* -----------------------------------------------------------------------------------------------\n     * Upstash Rate Limiting (Redis)\n     * -----------------------------------------------------------------------------------------------*/\n\n    UPSTASH_REDIS_REST_URL: z.string().url().optional(),\n    UPSTASH_REDIS_REST_TOKEN: z.string().optional(),\n    ENABLE_RATE_LIMITING: z.enum([\"true\", \"false\"]).default(\"false\"),\n    RATE_LIMITING_REQUESTS_PER_SECOND: z.coerce.number().default(50),\n\n    /* -----------------------------------------------------------------------------------------------\n     * Umami Analytics\n     * -----------------------------------------------------------------------------------------------*/\n    UMAMI_WEBSITE_ID: z.string().optional(),\n  },\n\n  /**\n   * Specify your client-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars. To expose them to the client, prefix them with\n   * `NEXT_PUBLIC_`.\n   */\n  client: {\n    NEXT_PUBLIC_FIREBASE_API_KEY: z.string(),\n    NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN: z.string(),\n    NEXT_PUBLIC_FIREBASE_PROJECT_ID: z.string(),\n    NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET: z.string(),\n    NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID: z.string(),\n    NEXT_PUBLIC_FIREBASE_APP_ID: z.string(),\n  },\n\n  /**\n   * You can't destruct `process.env` as a regular object in the Next.js edge runtimes (e.g.\n   * middlewares) or client-side so we need to destruct manually.\n   * For Next.js >= 13.4.4, you only need to destructure client variables (Only valid for `experimental__runtimeEnv`)\n   */\n  experimental__runtimeEnv: {\n    NEXT_PUBLIC_FIREBASE_API_KEY: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n    NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:\n      process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n    NEXT_PUBLIC_FIREBASE_PROJECT_ID:\n      process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n    NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:\n      process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n    NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:\n      process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n    NEXT_PUBLIC_FIREBASE_APP_ID: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  },\n\n  /**\n   * Makes it so that empty strings are treated as undefined.\n   * `SOME_VAR: z.string()` and `SOME_VAR=''` will throw an error.\n   */\n  emptyStringAsUndefined: true,\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,MAAM,MAAM,IAAA,0KAAS,EAAC;IAC3B;;;GAGC,GACD,gBAAgB,CAAC,CAAC,QAAQ,GAAG,CAAC,mBAAmB;IAEjD;;;GAGC,GACD,QAAQ;QACN;;sGAEkG,GAElG,UAAU,uKAAC,CACR,IAAI,CAAC;YAAC;YAAe;YAAQ;SAAa,EAC1C,OAAO,CAAC;QAEX;;sGAEkG,GAElG,qBAAqB,uKAAC,CACnB,MAAM,GACN,GAAG,CAAC,GAAG;YAAE,SAAS;QAA4C;QACjE,uBAAuB,uKAAC,CACrB,MAAM,GACN,KAAK,CAAC;YAAE,SAAS;QAA8C;QAClE,sBAAsB,uKAAC,CACpB,MAAM,GACN,GAAG,CAAC,GAAG;YAAE,SAAS;QAA6C;QAElE;;sGAEkG,GAElG,kBAAkB,uKAAC,CAChB,MAAM,GACN,GAAG,CAAC;YAAE,SAAS;QAAyC,GACxD,QAAQ;QAEX;;sGAEkG,GAElG,wBAAwB,uKAAC,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ;QACjD,0BAA0B,uKAAC,CAAC,MAAM,GAAG,QAAQ;QAC7C,sBAAsB,uKAAC,CAAC,IAAI,CAAC;YAAC;YAAQ;SAAQ,EAAE,OAAO,CAAC;QACxD,mCAAmC,uKAAC,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC;QAE7D;;sGAEkG,GAClG,kBAAkB,uKAAC,CAAC,MAAM,GAAG,QAAQ;IACvC;IAEA;;;;GAIC,GACD,QAAQ;QACN,8BAA8B,uKAAC,CAAC,MAAM;QACtC,kCAAkC,uKAAC,CAAC,MAAM;QAC1C,iCAAiC,uKAAC,CAAC,MAAM;QACzC,qCAAqC,uKAAC,CAAC,MAAM;QAC7C,0CAA0C,uKAAC,CAAC,MAAM;QAClD,6BAA6B,uKAAC,CAAC,MAAM;IACvC;IAEA;;;;GAIC,GACD,0BAA0B;QACxB,4BAA4B;QAC5B,gCAAgC;QAEhC,+BAA+B;QAE/B,mCAAmC;QAEnC,wCAAwC;QAExC,2BAA2B;IAC7B;IAEA;;;GAGC,GACD,wBAAwB;AAC1B"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///X:/Apps/MelodyMakerStudio/lib/firebase-admin.ts"],"sourcesContent":["import { initializeApp, getApps, cert } from \"firebase-admin/app\";\r\nimport { getAuth } from \"firebase-admin/auth\";\r\nimport { getFirestore } from \"firebase-admin/firestore\";\r\nimport { getStorage } from \"firebase-admin/storage\";\r\nimport { env } from \"./env\";\r\n\r\nconst apps = getApps();\r\n\r\nconst app =\r\n    apps.length === 0\r\n        ? initializeApp({\r\n            credential: cert({\r\n                projectId: env.FIREBASE_PROJECT_ID,\r\n                clientEmail: env.FIREBASE_CLIENT_EMAIL,\r\n                privateKey: env.FIREBASE_PRIVATE_KEY.replace(/\\\\n/g, \"\\n\"),\r\n            }),\r\n            storageBucket: env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n        })\r\n        : apps[0];\r\n\r\nexport const adminAuth = getAuth(app);\r\nexport const adminDb = getFirestore(app, \"mmsdb\");\r\ntry {\r\n    adminDb.settings({ ignoreUndefinedProperties: true });\r\n} catch (error) {\r\n    // Settings already applied\r\n}\r\nexport const adminStorage = getStorage(app);\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAEA,MAAM,OAAO,IAAA,2JAAO;AAEpB,MAAM,MACF,KAAK,MAAM,KAAK,IACV,IAAA,iKAAa,EAAC;IACZ,YAAY,IAAA,wJAAI,EAAC;QACb,WAAW,iHAAG,CAAC,mBAAmB;QAClC,aAAa,iHAAG,CAAC,qBAAqB;QACtC,YAAY,iHAAG,CAAC,oBAAoB,CAAC,OAAO,CAAC,QAAQ;IACzD;IACA,eAAe,iHAAG,CAAC,mCAAmC;AAC1D,KACE,IAAI,CAAC,EAAE;AAEV,MAAM,YAAY,IAAA,6JAAO,EAAC;AAC1B,MAAM,UAAU,IAAA,4KAAY,EAAC,KAAK;AACzC,IAAI;IACA,QAAQ,QAAQ,CAAC;QAAE,2BAA2B;IAAK;AACvD,EAAE,OAAO,OAAO;AACZ,2BAA2B;AAC/B;AACO,MAAM,eAAe,IAAA,sKAAU,EAAC"}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///X:/Apps/MelodyMakerStudio/lib/auth-helpers.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { cookies } from \"next/headers\";\r\nimport { adminAuth } from \"./firebase-admin\";\r\n\r\n/**\r\n * Get the current user from Firebase session cookie\r\n * Server-side only\r\n */\r\nexport async function getServerUser() {\r\n    const cookieStore = await cookies();\r\n    const sessionCookie = cookieStore.get(\"session\")?.value;\r\n    if (!sessionCookie) return null;\r\n\r\n    try {\r\n        const decodedClaims = await adminAuth.verifySessionCookie(\r\n            sessionCookie,\r\n            true\r\n        );\r\n        return await adminAuth.getUser(decodedClaims.uid);\r\n    } catch (error) {\r\n        console.error(\"Error verifying session:\", error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Require authentication - throws error if not authenticated\r\n * Use this in server actions that require authentication\r\n */\r\nexport async function requireAuth() {\r\n    const user = await getServerUser();\r\n    if (!user) {\r\n        throw new Error(\"Unauthorized - Please sign in\");\r\n    }\r\n    return user;\r\n}\r\n\r\n/**\r\n * Create session cookie from Firebase ID token\r\n * Call this from a server action after successful login\r\n */\r\nexport async function createSessionCookie(idToken: string) {\r\n    const expiresIn = 60 * 60 * 24 * 5 * 1000; // 5 days\r\n\r\n    try {\r\n        const sessionCookie = await adminAuth.createSessionCookie(idToken, {\r\n            expiresIn,\r\n        });\r\n\r\n        const cookieStore = await cookies();\r\n        cookieStore.set(\"session\", sessionCookie, {\r\n            maxAge: expiresIn,\r\n            httpOnly: true,\r\n            secure: process.env.NODE_ENV === \"production\",\r\n            sameSite: \"lax\",\r\n            path: \"/\",\r\n        });\r\n\r\n        return { success: true };\r\n    } catch (error) {\r\n        console.error(\"Error creating session cookie:\", error);\r\n        return { success: false, error: \"Failed to create session\" };\r\n    }\r\n}\r\n\r\n/**\r\n * Delete session cookie\r\n * Call this on sign out\r\n */\r\nexport async function deleteSessionCookie() {\r\n    const cookieStore = await cookies();\r\n    cookieStore.delete(\"session\");\r\n}\r\n\r\n/**\r\n * Verify ID token and return user\r\n */\r\nexport async function verifyIdToken(idToken: string) {\r\n    try {\r\n        const decodedToken = await adminAuth.verifyIdToken(idToken);\r\n        return await adminAuth.getUser(decodedToken.uid);\r\n    } catch (error) {\r\n        console.error(\"Error verifying ID token:\", error);\r\n        return null;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;;;;;;;;;AAMO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,gBAAgB,YAAY,GAAG,CAAC,YAAY;IAClD,IAAI,CAAC,eAAe,OAAO;IAE3B,IAAI;QACA,MAAM,gBAAgB,MAAM,qIAAS,CAAC,mBAAmB,CACrD,eACA;QAEJ,OAAO,MAAM,qIAAS,CAAC,OAAO,CAAC,cAAc,GAAG;IACpD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO;IACX;AACJ;AAMO,eAAe;IAClB,MAAM,OAAO,MAAM;IACnB,IAAI,CAAC,MAAM;QACP,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;AAMO,eAAe,oBAAoB,OAAe;IACrD,MAAM,YAAY,KAAK,KAAK,KAAK,IAAI,MAAM,SAAS;IAEpD,IAAI;QACA,MAAM,gBAAgB,MAAM,qIAAS,CAAC,mBAAmB,CAAC,SAAS;YAC/D;QACJ;QAEA,MAAM,cAAc,MAAM,IAAA,0IAAO;QACjC,YAAY,GAAG,CAAC,WAAW,eAAe;YACtC,QAAQ;YACR,UAAU;YACV,QAAQ,oDAAyB;YACjC,UAAU;YACV,MAAM;QACV;QAEA,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO;YAAE,SAAS;YAAO,OAAO;QAA2B;IAC/D;AACJ;AAMO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;AACvB;AAKO,eAAe,cAAc,OAAe;IAC/C,IAAI;QACA,MAAM,eAAe,MAAM,qIAAS,CAAC,aAAa,CAAC;QACnD,OAAO,MAAM,qIAAS,CAAC,OAAO,CAAC,aAAa,GAAG;IACnD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO;IACX;AACJ;;;IA7EsB;IAqBA;IAYA;IA4BA;IAQA;;AArEA,+OAAA;AAqBA,+OAAA;AAYA,+OAAA;AA4BA,+OAAA;AAQA,+OAAA"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///X:/Apps/MelodyMakerStudio/.next-internal/server/app/%28admin%29/admin/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createSessionCookie as '40c67ba5d73e45c700db02d4b7fbf4038110ac1ced'} from 'ACTIONS_MODULE0'\nexport {deleteSessionCookie as '0065238a8b319d83a2352a755daedcc6afdf1effd8'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}